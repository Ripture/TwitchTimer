
<html>
  <head>
    <style>
    h1 {
      text-shadow: 2px 2px 4px purple;
    }
    body {
    background: #C8C8C8 no-repeat fixed center;
    }
    </style>
    <script>
    window.onload = new Function("changeChannel('nl_Kripp');");

    var counter = 20;
    var counting;
    var paused = false;
    // id = setInterval(timer, 1000);

    // function pauseTimer(){
    //   if (paused){
    //     id = setInterval(timer, 1000);
    //     document.getElementById("pausebtn").innerHTML = "Pause";
    //   }
    //   else {
    //     document.getElementById("pausebtn").innerHTML = "Unpause";
    //     clearInterval(id)
    //   }
    //   paused = !paused;
    // }

    function timer(){
      counter--;
      if(counter < 0) {
        document.getElementById("go").click();
      } else {
        document.getElementById("timer").innerHTML = counter.toString();
        }
    }

    function changeChannel(name){
      while (document.getElementById("player").firstChild){
          document.getElementById("player").removeChild(document.getElementById("player").firstChild);
      }

      var newplayer = document.createElement("object");
      newplayer.type = "application/x-shockwave-flash";
      newplayer.height = 378;
      newplayer.width = 620;
      newplayer.data = "//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf";
      newplayer.bgcolor = "#000000";

      var paramAllowFullScreen = document.createElement("PARAM");
      paramAllowFullScreen.name = "allowFullScreen";
      paramAllowFullScreen.value = "true"

      var paramAllowScriptAccess = document.createElement("PARAM");
      paramAllowScriptAccess.name = "allowScriptAccess";
      paramAllowScriptAccess.value = "always";

      var paramAllowNetworking = document.createElement("PARAM");
      paramAllowNetworking.name = "allowNetworking";
      paramAllowNetworking.value = "all";

      var paramMovie = document.createElement("PARAM");
      paramAllowScriptAccess.name = "movie";
      paramAllowScriptAccess.value = "//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf";

      var paramFlashvars = document.createElement("PARAM");
      paramFlashvars.name = "flashvars";
      paramFlashvars.value = "channel=" + name + "&auto_play=true& start_volume=25";

      newplayer.appendChild(paramAllowFullScreen);
      newplayer.appendChild(paramAllowScriptAccess);
      newplayer.appendChild(paramMovie);
      newplayer.appendChild(paramFlashvars);

      document.getElementById("player").appendChild(newplayer);
    }

    //var serversocket = new WebSocket ("ws://70.161.150.36:1935/requestStreamer");
    var serversocket = new WebSocket ("ws://localhost:1935/requestStreamer");

    // Write message on receive
    serversocket.onmessage = function(e) {
      changeChannel(e.data);
      document.getElementById("streamer").innerHTML = "Streamer: " + e.data;
    };
 
    function requestStreamer() {
      serversocket.send("requestStreamer");
    }

    </script>
  </head>
  <body>
    <div id="background">
      <div class="container">
        <div class="page-title">
          <h1>Twitch</h1>
          <div id="streamer">Streamer: nl_Kripp</div>
<!--           <form action ="next" method ="POST">
            <Input type ="submit" value="go" id="go">
          </form> -->
          <!-- <button type="button" onclick="pauseTimer()" id="pausebtn">Pause</button> -->
<!--           <form action="next" method ="POST">
            <Input type ="submit" value="change" id="change" onclick="changeChannel();">
          </form> -->
<!--           <input id="sendtext" type="text" onkeydown="if (event.keyCode == 13) {senddata();}" />-->
           <input type="button" id="sendBtn" value="NEXT" onclick="requestStreamer()"></input>
          <div id="timer">20</div>
          <hr />
        </div>

      <div id="player">

      </div>
    </div>
  </body>
</html>