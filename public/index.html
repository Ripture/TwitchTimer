
<html>
  <head>
    <style>
      h1 {text-shadow: 2px 2px 4px purple;}
      body {background: #C8C8C8 no-repeat fixed center;}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
      $(function () {
        window.onPlayerEvent = function (data) {
          data.forEach(function(event) {
            if (event.event == "playerInit") {
              var player = $("#twitch_embed_player")[0];
              player.playVideo();
              player.mute();
            }
          });
        }

        swfobject.embedSWF("//www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf", "twitch_embed_player", "640", "400", "11", null,
          { "eventsCallback":"onPlayerEvent",
            "embed":1,
            "channel":"nl_Kripp",
            "auto_play":"true",},
          { "allowScriptAccess":"always",
            "allowFullScreen":"true"});
      });

    // window.onload = new Function("changeChannel('nl_Kripp');");

    var counter = 20;
    var counting;
    var paused = false;
    // id = setInterval(timer, 1000);

    // function pauseTimer(){
    //   if (paused){
    //     id = setInterval(timer, 1000);
    //     document.getElementById("pausebtn").innerHTML = "Pause";
    //   }
    //   else {
    //     document.getElementById("pausebtn").innerHTML = "Unpause";
    //     clearInterval(id)
    //   }
    //   paused = !paused;
    // }

    function timer(){
      counter--;
      if(counter < 0) {
        document.getElementById("go").click();
      } else {
        document.getElementById("timer").innerHTML = counter.toString();
        }
    }

    function changeChannel(name){
      // while (document.getElementById("player").firstChild){
      //     document.getElementById("player").removeChild(document.getElementById("player").firstChild);
      // }
    }

    var hidden = false;
    function showPlyr(){
      if (hidden)
      {
        $("#twitch_embed_player").show();
        hidden = false
        $("#showplr").prop('value', 'hide')
      }
      else{
        $("#twitch_embed_player").hide();
        hidden = true
        $("#showplr").prop('value', 'show')
      }
    }

    //var serversocket = new WebSocket ("ws://70.161.150.36:1935/requestStreamer");
    var serversocket = new WebSocket ("ws://localhost:1935/requestStreamer");

    // Write message on receive
    serversocket.onmessage = function(e) {
      changeChannel(e.data);
      document.getElementById("streamer").innerHTML = "Streamer: " + e.data;
    };
 
    function requestStreamer() {
      serversocket.send("requestStreamer");
    }

    </script>
  </head>
  <body>
    <div id="background">
      <div class="container">
        <div class="page-title">
          <h1>Twitch</h1>
          <div id="streamer">Streamer: nl_Kripp</div>
<!--           <form action ="next" method ="POST">
            <Input type ="submit" value="go" id="go">
          </form> -->
          <!-- <button type="button" onclick="pauseTimer()" id="pausebtn">Pause</button> -->
<!--           <form action="next" method ="POST">
            <Input type ="submit" value="change" id="change" onclick="changeChannel();">
          </form> -->
<!--           <input id="sendtext" type="text" onkeydown="if (event.keyCode == 13) {senddata();}" />-->
           <input type="button" id="sendBtn" value="NEXT" onclick="requestStreamer()"></input>
           <input type="button" id="showplr" value="hide" onclick="showPlyr()"></input>
          <div id="timer">20</div>
          <hr />
        </div>

      <div id="twitch_embed_player">

      </div>
    </div>
  </body>
</html>